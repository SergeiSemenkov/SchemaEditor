{"version":3,"sources":["webpack:///./src/components/ListItems/ElementChildArray.vue?c9fa","webpack:///src/components/ListItems/ElementChildArray.vue","webpack:///./src/components/ListItems/ElementChildArray.vue?cca4","webpack:///./src/components/ListItems/ElementChildArray.vue?4f0a","webpack:///./src/components/ListItems/ElementChildArray.vue?eada"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","staticClass","attrs","_v","_s","arrayDescription","name","on","openNewItemModal","_l","item","idx","key","getElementName","timestamp","openChildElement","model","value","callback","$$v","dialogOpened","expression","possibleElements","newItemType","addNewItem","staticRenderFns","components","ElementListItem","mixins","data","props","type","Object","required","Number","element","Element","computed","arrayItems","items","getElementsOfType","methods","getAttribute","$emit","payload","length","insertAdjacentElement","createdElement","itemInserted","$root","component","VBtn","VCard","VCardActions","VCardText","VCardTitle","VDialog","VDivider","VIcon","VSelect","VSpacer","VSubheader"],"mappings":"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","file":"js/chunk-38de5530.02e64c05.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"margin-bottom\":\"2rem\"}},[_c('v-subheader',{staticClass:\"capitalize\",attrs:{\"inset\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.arrayDescription.name)+\" \"),_c('v-spacer'),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":_vm.openNewItemModal}},[_c('v-icon',[_vm._v(\"mdi-plus\")])],1)],1),_c('v-divider'),_vm._l((_vm.arrayItems),function(item,idx){return _c('element-list-item',{key:((_vm.arrayDescription.type) + \"-\" + (_vm.getElementName(item)) + \"-\" + idx),attrs:{\"element\":item,\"timestamp\":_vm.timestamp},on:{\"open-editor\":_vm.openChildElement}})}),_c('v-dialog',{attrs:{\"width\":\"500\"},model:{value:(_vm.dialogOpened),callback:function ($$v) {_vm.dialogOpened=$$v},expression:\"dialogOpened\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"text-h5 grey lighten-2\"},[_vm._v(\" Add new element \")]),_c('v-card-text',[_c('v-select',{attrs:{\"items\":_vm.possibleElements,\"label\":\"Select element type\"},model:{value:(_vm.newItemType),callback:function ($$v) {_vm.newItemType=$$v},expression:\"newItemType\"}})],1),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":_vm.addNewItem}},[_vm._v(\" Add \")])],1)],1)],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div style=\"margin-bottom: 2rem;\">\n    <v-subheader inset class=\"capitalize\">\n      {{ arrayDescription.name }}\n      <v-spacer />\n      <v-btn\n        icon\n        @click=\"openNewItemModal\"\n      >\n        <v-icon>mdi-plus</v-icon>\n      </v-btn>\n    </v-subheader>\n    <v-divider />\n    <element-list-item\n      v-for=\"(item, idx) in arrayItems\" \n      :key=\"`${arrayDescription.type}-${getElementName(item)}-${idx}`\"\n      :element=\"item\"\n      :timestamp=\"timestamp\"\n      @open-editor=\"openChildElement\"\n    />\n    <v-dialog\n      v-model=\"dialogOpened\"\n      width=\"500\"\n    >\n      <v-card>\n        <v-card-title class=\"text-h5 grey lighten-2\">\n          Add new element\n        </v-card-title>\n\n        <v-card-text>\n          <v-select\n            v-model=\"newItemType\"\n            :items=\"possibleElements\"\n            label=\"Select element type\"\n          ></v-select>\n        </v-card-text>\n\n        <v-divider></v-divider>\n\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn\n            color=\"primary\"\n            text\n            @click=\"addNewItem\"\n          >\n            Add\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<script>\nimport xmlDescriptionMixin from '../../mixins/xmlDescriptionMixin'\n\nexport default {\n  components: { \n    ElementListItem: () => import('./ElementListItem.vue')\n  },\n  name: 'ElementChildArray',\n  mixins: [\n    xmlDescriptionMixin\n  ],\n  data() {\n    return {\n      dialogOpened: false,\n      newItemType: null\n    }\n  },\n  props: {\n    arrayDescription: {\n      type: Object,\n      required: true\n    },\n    timestamp: {\n      type: Number,\n      required: true,\n    },\n    element: {\n      type: Element,\n      required: true\n    },\n  },\n  computed: {\n    arrayItems() {\n      this.timestamp\n      \n      const items = Array.from(this.element.querySelectorAll(`:scope > ${this.possibleElements.join(', :scope >')}`))\n      return items\n    },\n    possibleElements() {\n      this.timestamp\n      return this.getElementsOfType(this.arrayDescription.type)\n    }\n  },\n  methods: {\n    getElementName(element) {\n      return element.getAttribute('name')\n    },\n    openChildElement(payload) {\n      this.$emit('open-editor', payload)\n    },\n    openNewItemModal() {\n      if (this.possibleElements.length > 1) {\n        this.dialogOpened = true\n      } else {\n        this.newItemType = this.possibleElements[0];\n        this.addNewItem();\n      }\n    },\n    addNewItem() {\n      if (this.newItemType) {\n        this.dialogOpened = false\n        const type = this.newItemType\n        this.newItemType = null\n\n        const createdElement = document.createElementNS(null, type)\n\n        const desc = this.getDescriptionForElement(this.element.tagName)\n\n        if (this.arrayItems.length) {\n          this.arrayItems[this.arrayItems.length - 1].insertAdjacentElement('afterend', createdElement)\n        } else {\n          const arraysBefore = desc.arrays.filter(e => e.index < this.arrayDescription.index)\n          let itemInserted = false\n\n          for (let i = arraysBefore.length - 1; i >= 0; i--) {\n            const tmpArray = arraysBefore[i]\n            const possibleElements = this.getElementsOfType(tmpArray.type)\n            const items = Array.from(this.element.querySelectorAll(`:scope > ${possibleElements.join(', :scope >')}`))\n\n            if (items.length) {\n              items[items.length - 1].insertAdjacentElement('afterend', createdElement)\n              itemInserted = true\n            }\n            break\n          }\n\n          if (!itemInserted) {\n            this.element.insertAdjacentElement('afterbegin', createdElement)\n          }\n        }\n\n        this.$root.$emit('modelChanged')\n\n        this.$emit('open-editor', { element: createdElement })\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.openIcon {\n  transition: transform 0.5 ease-in-out;\n}\n\n.openIcon__opened {\n  transform: rotate(-180deg);\n}\n\n.capitalize {\n  text-transform: capitalize;\n}\n</style>>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ElementChildArray.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ElementChildArray.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ElementChildArray.vue?vue&type=template&id=22f5e2a6&scoped=true&\"\nimport script from \"./ElementChildArray.vue?vue&type=script&lang=js&\"\nexport * from \"./ElementChildArray.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ElementChildArray.vue?vue&type=style&index=0&id=22f5e2a6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"22f5e2a6\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VSubheader } from 'vuetify/lib/components/VSubheader';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VDialog,VDivider,VIcon,VSelect,VSpacer,VSubheader})\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ElementChildArray.vue?vue&type=style&index=0&id=22f5e2a6&scoped=true&lang=css&\""],"sourceRoot":""}