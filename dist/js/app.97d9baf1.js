(function(e){function t(t){for(var r,a,c=t[0],l=t[1],s=t[2],u=0,m=[];u<c.length;u++)a=c[u],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&m.push(o[a][0]),o[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(m.length)m.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=l(l.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function c(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-38de5530":"02e64c05","chunk-45d50e9a":"a0cf54cc"}[e]+".js"}function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-38de5530":1,"chunk-45d50e9a":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-38de5530":"07f28d71","chunk-45d50e9a":"93b790d9"}[e]+".css",o=l.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var s=i[c],u=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(u===r||u===o))return t()}var m=document.getElementsByTagName("style");for(c=0;c<m.length;c++){s=m[c],u=s.getAttribute("data-href");if(u===r||u===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],d.parentNode.removeChild(d),n(i)},d.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(d)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=i);var s,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=c(e);var m=new Error;s=function(t){u.onerror=u.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;m.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",m.name="ChunkLoadError",m.type=r,m.request=a,n[1](m)}o[e]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:u})}),12e4);u.onerror=u.onload=s,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/scheme-editor/",l.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var m=0;m<s.length;m++)t(s[m]);var d=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-app-bar",{attrs:{app:"","clipped-right":"",absolute:"",color:"primary",dark:""}},[n("v-toolbar-title",[e._v("eMondrian schema editor")]),n("v-spacer"),n("v-btn",{on:{click:e.downloadSchema}},[e._v("Download schema file")])],1),e.xmlDoc?n("v-navigation-drawer",{attrs:{app:"",width:"500"}},[n("element-tree",{attrs:{xmlDoc:e.xmlDoc,timestamp:e.updateTimestamp},on:{"open-editor":e.openEditor}})],1):e._e(),n("v-main",[e.xmlDoc?e.elementInEditor?n("xml-element-editor",{key:e.elementInEditor.tagName+e.elementInEditor.getAttribute("name"),attrs:{element:e.elementInEditor,elementRequired:e.elementInEditorRequired},on:{close:function(t){e.elementInEditor=null}}}):e._e():[n("v-row",[n("v-col",{staticClass:"mt-6",attrs:{cols:"6",offset:"3"}},[n("v-stepper",{attrs:{vertical:""},model:{value:e.stepperValue,callback:function(t){e.stepperValue=t},expression:"stepperValue"}},[n("v-stepper-step",{attrs:{complete:e.stepperValue>1,step:"1"}},[e._v(" Upload a schema description ")]),n("v-stepper-content",{attrs:{step:"1"}},[n("v-file-input",{attrs:{accept:".xml",label:"Select schema description"},model:{value:e.descriptionFile,callback:function(t){e.descriptionFile=t},expression:"descriptionFile"}}),n("v-btn",{attrs:{color:"primary"},on:{click:e.loadDescriptionFile}},[e._v(" Continue ")])],1),n("v-stepper-step",{attrs:{step:"2",complete:e.stepperValue>2}},[e._v(" Upload a schema ")]),n("v-stepper-content",{attrs:{step:"2"}},[n("v-file-input",{attrs:{accept:".xml",label:"Select schema"},model:{value:e.schemaFile,callback:function(t){e.schemaFile=t},expression:"schemaFile"}}),n("v-btn",{attrs:{color:"primary"},on:{click:e.loadSchemaFile}},[e._v(" Continue ")])],1)],1)],1)],1)]],2)],1)},o=[],i=n("1da1"),c=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("a15b"),n("96cf"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list",{attrs:{dense:"",nav:""}},[n("v-list-item-group",{attrs:{color:"primary"}},[n("v-subheader",[e._v("Schema ")]),n("v-divider"),n("element-list-item",{attrs:{element:e.schema,timestamp:e.timestamp},on:{"open-editor":e.openEditor}})],1)],1)}),l=[],s=(n("a9e3"),n("c2f6")),u={components:{ElementListItem:s["default"]},props:{xmlDoc:{type:XMLDocument,required:!0},timestamp:{type:Number,required:!0}},computed:{schema:function(){return this.timestamp,this.xmlDoc.querySelector("Schema")}},methods:{openEditor:function(e){this.$emit("open-editor",e)}}},m=u,d=n("2877"),p=n("6544"),f=n.n(p),h=n("ce7e"),v=n("8860"),b=n("1baa"),g=n("e0c7"),y=Object(d["a"])(m,c,l,!1,null,null,null),E=y.exports;f()(y,{VDivider:h["a"],VList:v["a"],VListItemGroup:b["a"],VSubheader:g["a"]});var x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",{attrs:{cols:"12",md:"10",lg:"8","offset-md":"1","offset-lg":"2",offset:"0"}},[n("v-row",{staticClass:"flex-wrap ma-4"},[n("v-col",{attrs:{cols:"12"}},[n("v-row",[n("v-col",{attrs:{cols:"8"}},[n("h2",[e._v("Element Type: "+e._s(e.elementType))])]),n("v-spacer"),n("v-col",[e.elementRequired?e._e():n("v-btn",{attrs:{block:"",color:"error"},on:{click:function(t){e.confirmationDialog=!0}}},[e._v(" Delete ")])],1),n("v-col",[n("v-btn",{attrs:{block:"",disabled:!e.hasChanges},on:{click:e.saveChanges}},[e._v(" Save ")])],1)],1)],1),n("v-col",{attrs:{cols:"12"}},[n("span",{domProps:{innerHTML:e._s(this.elementDesc.doc)}})]),e.requiredAttributes.length?n("v-col",{attrs:{cols:"12"}},[n("v-card",[n("v-card-title",[e._v("Required attributes")]),n("v-card-text",[e._l(e.requiredAttributes,(function(t){return[n("v-col",{key:t.name,attrs:{cols:"12"}},[n(e.getComponentForAttribute(t),{tag:"component",attrs:{label:t.name,items:t.values,dense:""},model:{value:e.configuredElement[t.name],callback:function(n){e.$set(e.configuredElement,t.name,n)},expression:"configuredElement[attribute.name]"}}),n("p",{staticClass:"mt-n2 text-caption",domProps:{innerHTML:e._s(t.doc)}})],1)]}))],2)],1)],1):e._e(),e.optionalAttributes.length?n("v-col",{attrs:{cols:"12"}},[n("v-card",[n("v-card-title",[e._v("Optional attributes")]),n("v-card-text",[e._l(e.optionalAttributes,(function(t){return[n("v-col",{key:t.name,attrs:{cols:"12"}},[n(e.getComponentForAttribute(t),{tag:"component",attrs:{label:t.name,items:t.values,dense:""},model:{value:e.configuredElement[t.name],callback:function(n){e.$set(e.configuredElement,t.name,n)},expression:"configuredElement[attribute.name]"}}),n("p",{staticClass:"mt-n2 text-caption",domProps:{innerHTML:e._s(t.doc)}})],1)]}))],2)],1)],1):e._e()],1),e.elementDesc.hasValue?n("v-row",{staticClass:"flex-wrap ma-4"},[n("v-col",{attrs:{cols:"12"}},[n("v-card",[n("v-card-title",[e._v("Element value")]),n("div",{staticClass:"ma-4"},[n("v-textarea",{attrs:{label:"Value of the element"},model:{value:e.configuredElement._value,callback:function(t){e.$set(e.configuredElement,"_value",t)},expression:"configuredElement._value"}})],1)],1)],1)],1):e._e()],1),n("v-dialog",{attrs:{width:"500"},model:{value:e.confirmationDialog,callback:function(t){e.confirmationDialog=t},expression:"confirmationDialog"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5 grey lighten-2"},[e._v(" Remove element ")]),n("v-card-text",{staticClass:"pa-4"},[e._v(" Are you sure you want to remove the element? ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){e.dialog=!1}}},[e._v(" Cancel ")]),n("v-btn",{attrs:{color:"error",text:""},on:{click:e.removeItem}},[e._v(" Remove ")])],1)],1)],1)],1)},_=[],w=(n("159b"),n("b0c0"),n("4e827"),n("4de4"),n("2ef0")),C=n.n(w),j=n("a143"),A=n("b974"),D=n("8654"),k=n("b73d"),V=null,S={mixins:[j["a"]],props:{element:{type:Element,required:!0},elementRequired:{type:Boolean,default:!1}},data:function(){var e=this,t=this.getDescriptionForElement(this.element.tagName),n={};return t.attributes.forEach((function(t){n[t.name]=e.element.getAttribute(t.name)})),t.hasValue&&(n._value=this.element.innerHTML),V=Object.assign({},n),{elementDesc:t,configuredElement:n,confirmationDialog:!1}},computed:{requiredAttributes:function(){return this.elementDesc.attributes.filter((function(e){return"true"===e.required})).sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}))},optionalAttributes:function(){return this.elementDesc.attributes.filter((function(e){return!e.required||"false"===e.required})).sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}))},hasChanges:function(){return!C.a.isEqual(V,this.configuredElement)},elementType:function(){return this.element.tagName}},methods:{saveChanges:function(){for(var e in this.configuredElement){if("_value"===e){this.element.innerHTML=this.configuredElement._value;break}this.configuredElement[e]&&this.element.setAttribute(e,this.configuredElement[e])}this.$root.$emit("modelChanged")},getComponentForAttribute:function(e){return e.values?A["a"]:"String"===e.type?D["a"]:"Boolean"===e.type?k["a"]:D["a"]},removeItem:function(){this.confirmationDialog=!1,this.element.parentNode.removeChild(this.element),this.$root.$emit("modelChanged"),this.$emit("close")},getArrayItems:function(){}}},O=S,q=n("8336"),T=n("b0af"),I=n("99d9"),L=n("62ad"),F=n("169a"),M=n("0fd9"),P=n("2fa4"),N=n("a844"),$=Object(d["a"])(O,x,_,!1,null,null,null),R=$.exports;f()($,{VBtn:q["a"],VCard:T["a"],VCardActions:I["a"],VCardText:I["b"],VCardTitle:I["c"],VCol:L["a"],VDialog:F["a"],VRow:M["a"],VSpacer:P["a"],VTextarea:N["a"]});n("d81d"),n("a630");function B(e){var t={};window.model=e;var n=e.querySelectorAll("Model > Element");return n.forEach((function(e){var n,r=e.getAttribute("type");t[r]={attributes:H(e),arrays:U(e),objects:X(e),doc:null===(n=e.querySelector("Doc"))||void 0===n?void 0:n.innerHTML,hasValue:!!e.querySelector("CData")}})),n.forEach((function(e){var n=e.getAttribute("type"),r=e.getAttribute("class");r&&(t[n].parent=t[r],t[n].parentClassName=r),t[n].isInstanceOf=function(e){return e===n||!!t[n].parent&&t[n].parent.isInstanceOf(e)}})),t}function H(e){var t=[],n=e.querySelectorAll("Attribute");return n.forEach((function(e){var n=e.getAttributeNames(),r={};n.forEach((function(t){var n;if(r[t]=e.getAttribute(t),r.doc=null===(n=e.querySelector("Doc"))||void 0===n?void 0:n.innerHTML,e.querySelector("Value")){var a=Array.from(e.querySelectorAll("Value")).map((function(e){return e.innerHTML}));r.values=a}})),t.push(r)})),t}function U(e){var t=[],n=e.querySelectorAll("Array");return n.forEach((function(e,n){var r=e.getAttributeNames(),a={};r.forEach((function(t){a[t]=e.getAttribute(t)})),a.index=n,t.push(a)})),t}function X(e){var t=[],n=e.querySelectorAll("Object");return n.forEach((function(e,n){var r=e.getAttributeNames(),a={};r.forEach((function(t){a[t]=e.getAttribute(t)})),a.index=n,t.push(a)})),t}var z={name:"App",components:{ElementTree:E,XmlElementEditor:R},mixins:[j["a"]],data:function(){return{xmlDoc:null,updateTimestamp:Date.now(),elementInEditor:null,elementInEditorRequired:null,stepperValue:1,descriptionFile:null,schemaFile:null}},mounted:function(){var e=this;this.$root.$on("modelChanged",(function(){e.updateTimestamp=Date.now()}))},methods:{loadSchemaFile:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.schemaFile){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.schemaFile.text();case 4:n=t.sent,r=new DOMParser,e.xmlDoc=r.parseFromString(n,"text/xml");case 7:case"end":return t.stop()}}),t)})))()},loadDescriptionFile:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.descriptionFile){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.descriptionFile.text();case 4:n=t.sent,r=new DOMParser,a=r.parseFromString(n,"text/xml"),o=B(a),e.loadDescription(o),e.stepperValue++;case 10:case"end":return t.stop()}}),t)})))()},openEditor:function(e){var t=e.element,n=e.required;this.elementInEditor=t,this.elementInEditorRequired=n},downloadSchema:function(){var e=new XMLSerializer,t=e.serializeToString(this.xmlDoc),n=new Blob([t],{type:"text/xml"}),r=document.createElement("a");r.download="schema",r.href=URL.createObjectURL(n),r.dataset.downloadurl=["text/xml",r.download,r.href].join(":"),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout((function(){URL.revokeObjectURL(r.href)}),1500)}}},J=z,G=n("7496"),K=n("40dc"),Q=n("23a7"),W=n("f6c4"),Y=n("f774"),Z=n("7e85"),ee=n("e516"),te=n("56a4"),ne=n("2a7f"),re=Object(d["a"])(J,a,o,!1,null,null,null),ae=re.exports;f()(re,{VApp:G["a"],VAppBar:K["a"],VBtn:q["a"],VCol:L["a"],VFileInput:Q["a"],VMain:W["a"],VNavigationDrawer:Y["a"],VRow:M["a"],VSpacer:P["a"],VStepper:Z["a"],VStepperContent:ee["a"],VStepperStep:te["a"],VToolbarTitle:ne["a"]});var oe=n("f309");r["a"].use(oe["a"]);var ie=new oe["a"]({});r["a"].config.productionTip=!1,new r["a"]({vuetify:ie,render:function(e){return e(ae)}}).$mount("#app")},"5a8e":function(e,t,n){},a143:function(e,t,n){"use strict";var r=n("2909"),a=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("159b"),n("4fadc"),n("7db0"),n("b0c0"),new Map);t["a"]={methods:{loadDescription:function(e){a=new Map,Object.entries(e).forEach((function(e){a.set(e[0],e[1])}))},getDescriptionForElement:function(e){var t=a.get(e);return this.getMergedDescription(t)},getMergedDescription:function(e){var t,n,a,o={attributes:[],arrays:[],objects:[],doc:e.doc,hasValue:e.hasValue};if((t=o.attributes).push.apply(t,Object(r["a"])(e.attributes)),(n=o.arrays).push.apply(n,Object(r["a"])(e.arrays)),(a=o.objects).push.apply(a,Object(r["a"])(e.objects)),e.parent){var i=this.getMergedDescription(e.parent);i.attributes.forEach((function(e){var t=o.attributes.find((function(t){return t.name===e.name}));t||o.attributes.push(e)})),i.arrays.forEach((function(e){var t=o.arrays.find((function(t){return t.name===e.name}));t||o.arrays.push(e)})),i.objects.forEach((function(e){var t=o.objects.find((function(t){return t.name===e.name}));t||o.objects.push(e)}))}return o},getElementsOfType:function(e){var t=[];return a.forEach((function(n,r){n.isInstanceOf(e)&&t.push(r)})),t}}}},bb16:function(e,t,n){"use strict";n("5a8e")},c2f6:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-list-item",{on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.openItem.apply(null,arguments)}}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:e._s(e.iconName)}})],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(e.name)}})],1),n("v-list-item-icon",{on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.opened=!e.opened}}},[e.hasArrays?n("v-icon",{class:{openIcon:!0,openIcon__opened:e.opened},domProps:{textContent:e._s("mdi-chevron-down")}}):e._e()],1)],1),e.opened?n("div",{staticClass:"element_tree_item"},[e._l(e.childObjects,(function(t,r){return n("element-child-object",{key:t.type+"-"+t.name+"-"+r,attrs:{obj:t,timestamp:e.timestamp},on:{"open-editor":e.openChildElement,"create-object":e.createObject}})})),e._l(e.childArrays,(function(t){return n("element-child-array",{key:""+t.name,attrs:{element:e.element,arrayDescription:t,timestamp:e.timestamp},on:{"open-editor":e.openChildElement}})}))],2):e._e()],1)},a=[],o=n("5530"),i=(n("d3b7"),n("3ca3"),n("ddb0"),n("a9e3"),n("d81d"),n("a15b"),n("7db0"),n("4de4"),n("a143")),c={name:"ElementListItem",components:{ElementChildArray:function(){return n.e("chunk-38de5530").then(n.bind(null,"b22d"))},ElementChildObject:function(){return n.e("chunk-45d50e9a").then(n.bind(null,"faf0"))}},mixins:[i["a"]],props:{element:{type:Element,required:!0},timestamp:{type:Number,required:!0}},data:function(){return{opened:!1,desc:this.getDescriptionForElement(this.element.tagName)}},computed:{name:function(){return this.timestamp,this.element.getAttribute("name")},hasArrays:function(){return this.desc.arrays.length},childArrays:function(){this.timestamp;var e=this.desc.arrays;return e},childObjects:function(){var e=this;this.timestamp;var t=this.desc.objects.map((function(t){var n=e.getPossibleElements(t.type),r=e.element.querySelector(":scope > ".concat(n.join(", :scope >")));return Object(o["a"])(Object(o["a"])({},t),{},{element:r})}));return t},iconName:function(){return this.timestamp,"Cube"===this.element.tagName?"mdi-cube":"mdi-xml"}},methods:{update:function(){this.$emit("update")},openItem:function(){this.$emit("open-editor",{element:this.element})},openChildElement:function(e){this.$emit("open-editor",e)},getPossibleElements:function(e){return this.getElementsOfType(e)},createObject:function(e){var t=this.desc.objects.find((function(t){return t.type===e.type})),n=this.desc.objects.filter((function(e){return e.index<t.index})),r=!1;if(n.length)for(var a=document.createElementNS(null,e.type),o=n.length-1;o>=0;o--){var i=n[o],c=this.getPossibleElements(i.type),l=this.element.querySelector(":scope > ".concat(c.join(", :scope >")));l&&(l.insertAdjacentElement("afterend",a),r=!0)}if(!r){var s=document.createElementNS(null,e.type);this.element.insertAdjacentElement("afterbegin",s)}this.$root.$emit("modelChanged")}}},l=c,s=(n("bb16"),n("2877")),u=n("6544"),m=n.n(u),d=n("132d"),p=n("da13"),f=n("5d23"),h=n("34c3"),v=Object(s["a"])(l,r,a,!1,null,"0639f0a4",null);t["default"]=v.exports;m()(v,{VIcon:d["a"],VListItem:p["a"],VListItemContent:f["a"],VListItemIcon:h["a"],VListItemTitle:f["b"]})}});
//# sourceMappingURL=app.97d9baf1.js.map